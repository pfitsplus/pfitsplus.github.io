---
title: "Code Comparison"
permalink: /research/code-comparison/
---
## Streaming Instability

The [streaming instability](/research/fluid-dynamics/#streaming-si) is a promising mechanism within [protoplanetary disks](/research/protoplanetary-disks/) to drive [planetesimal formation](/research/planet-formation/#planetesimal-formation) from mm- to cm-sized pebbles which result from [dust coagulation](/research/planet-formation/#dust-coagulation).
Since its discovery by [Youdin](/team/youdin-andrew/) & Goodman ([2005](https://ui.adsabs.harvard.edu/abs/2005ApJ...620..459Y/abstract){:target="_blank"}), several [hydrodynamics codes](/research/#software-development) have explored the parameters, non-linear properties, and implications of this aerodynamic instability that requires [feedback between dust and gas momenta](/research/fluid-dynamics/#dustgas-dynamics).
However, the non-trivial differences between numerical techniques (e.g., finite difference or finite volume) and dust modeling (e.g., as a pressureless fluid or as Lagrangian particles) can make it difficult to disentangle unique scientific results from the potential idiosyncrasies of a particular code or implementation.
In an effort to address these issues, we are leading a comprehensive comparison of various multipurpose codes across some of the key models and problems previously studied in investigations into the streaming instability.


### [<i class='fa-solid fa-file-pdf'></i>](/assets/docs/research/code-comparison/si/sicc_problem_set.pdf){:target="_blank"} [Problem Set](/assets/docs/research/code-comparison/si/sicc_problem_set.pdf){:target="_blank"}

We invite users and developers of hydrodynamics codes who wish to contribute to this project to review the Streaming Instability Code Comparison Problem Set ([PDF](/assets/docs/research/code-comparison/si/sicc_problem_set.pdf){:target="_blank"}).
As this document continues to be developed, including the addition of new problems in future revisions, please contact [Stanley A. Baronett](/team/baronett-stanley/) with any questions or feedback that may be helpful toward future revisions.


### [<i class='fab fa-fw fa-github'></i>](https://github.com/pfitsplus/sicc){:target="_blank"} [GitHub Repository](https://github.com/pfitsplus/sicc){:target="_blank"}

Figure scripts and source codes related to this project can be found in our [__pfitsplus/sicc__](https://github.com/pfitsplus/sicc) GitHub repository.
[Jupyter Notebooks](https://jupyter.org/) containing [Python](https://www.python.org/) scripts to generate the figures [below](#preliminary-figures) and in our forthcoming manuscript can be found in the [`/ipynb`](https://github.com/pfitsplus/sicc/tree/main/ipynb) directory.
Source and input files for some contributing codes can be found in the [`/source_files`](https://github.com/pfitsplus/sicc/tree/main/source_files) directory.
To be consistent with the structure of the [Problem Set](#problem-set) (Section 1.2), the subdirectories therein are hierarchically organized first by *model*, next by *problem*, next by *variation*, and last by *code*.
For more information, please see the repository [README](https://github.com/pfitsplus/sicc/blob/main/README.md), and feel free to [create an issue](https://github.com/pfitsplus/sicc/issues) for any questions, feedback, or issues encountered.


### [<i class='fab fa-fw fa-google-drive'></i>](https://drive.google.com/drive/folders/14GiJq2lyPePPaCrZzzELsCou5rLTza0v?usp=sharing){:target="_blank"}  [Google Shared Drive](https://drive.google.com/drive/folders/14GiJq2lyPePPaCrZzzELsCou5rLTza0v?usp=sharing){:target="_blank"}

The problem data outputted by contributing codes should be uploaded to our designated [Google Shared Drive](https://drive.google.com/drive/u/1/folders/14GiJq2lyPePPaCrZzzELsCou5rLTza0v).
Anyone with the link can view and comment on the contents, but please contact [Stanley A. Baronett](/team/baronett-stanley/) to request access to add files.
To be consistent with the structure of the [Problem Set](#problem-set) (Section 1.2), the subdirectories therein are hierarchically organized first by *model*, next by *problem*, next by *variation*, and last by *code*.
Regardless of the inherent data format normally generated by a contributing code, all requested output (e.g., arrays) must be stored in or converted to individual compressed [NumPy](https://numpy.org/doc/stable/index.html) `.npz` files (see the [official "Input and output" documentation](https://numpy.org/doc/stable/reference/routines.io.html) for details).
Further details on the structure and contents of submission data can be found in Section 1.1.2 of the [Problem Set](#problem-set).


### Figures

#### Fiducial Grid Resolution

![](/assets/images/research/code-comparison/si/BA-512_snapshots.png)
**Figure 1.** Dust density snapshots for Problem BA at a grid resolution of 512².
Each row shows the code labeled along the left margin.
In alphabetical order from top to bottom, the upper group implements an average of one (1) Lagrangian particle per grid cell, and the lower group implements a pressureless dust fluid.
Each column shows the simulation time in local orbital periods $$T$$ labeled along the top margin.
The color scale in the bottom right shows the dust density $$\rho_\mathrm{d}$$ relative to the initially uniform gas density $$\rho_\mathrm{g,0}$$.
Radial $$x$$ and vertical $$z$$ coordinates are in units of the vertical gas scale height $$H_\mathrm{g}$$.

![](/assets/images/research/code-comparison/si/BA-512_time_series.png)
**Figure 2.** Maximum dust densities $$\max(\rho_\mathrm{d})$$ as a function of time for Problem BA at a grid resolution of 512².
The units for density and time are the initially uniform gas density $$\rho_\mathrm{g,0}$$ and the local orbital period $$T$$, respectively.
The top panel uses a similar cadence for each time series with an average of 630 samples per code.
The bottom panel shows the simple moving average $$\mathrm{SMA}$$ with a sampling window of $$10T$$.
Dotted lines show codes that implement an average of one (1) Lagrangian particle per grid cell, solid lines show codes with pressureless dust fluids, and line colors show different codes.

![](/assets/images/research/code-comparison/si/BA-512_CDF.png)
**Figure 3.** Time-averaged cumulative distribution functions for the dust density for Problem BA at a grid resolution of 512².
Lines show the densities time-averaged over the saturation state $$\overline{\rho_\mathrm{d}}$$, and shaded areas show the $$1\sigma$$ time variability.
Dust densities are relative to the initially uniform gas density $$\rho_\mathrm{g,0}$$.
Dotted lines show codes that implement an average of one (1) Lagrangian particle per grid cell, solid lines show codes with pressureless dust fluids, and line colors show different codes.


##### Higher Particle Resolution

![](/assets/images/research/code-comparison/si/BA-512-np9_snapshots.png)
**Figure 4.** Similar to Figure [1](#higher-particle-resolution:~:text=Permalink-,Figure%201.,-Dust%20density%20snapshots) except for only codes that implement an average of nine (9) Lagrangian particles per grid cell.

![](/assets/images/research/code-comparison/si/BA-512-np9_time_series.png)
**Figure 5.** Similar to Figure [2](#higher-particle-resolution:~:text=.-,Figure%202.,-Maximum%20dust%20densities) except comparing only Lagrangian-particle implementations and that dash–dotted lines show an average of nine (9) particles per grid cell.
The top panel uses a similar cadence for each time series with an average of 1000 samples per code.

![](/assets/images/research/code-comparison/si/BA-512-np9_CDF.png)
**Figure 6.** Similar to Figure [3](#higher-particle-resolution:~:text=show%20different%20codes.-,Figure%203.,-Time%2Daveraged%20cumulative) except comparing only Lagrangian-particle implementations and that dash–dotted lines show an average of nine (9) particles per grid cell.

#### Higher Grid Resolution

![](/assets/images/research/code-comparison/si/BA-1024_snapshots.png)
**Figure 7.** Similar to Figure [1](#higher-particle-resolution:~:text=Permalink-,Figure%201.,-Dust%20density%20snapshots) except at a grid resolution of 1024².

![](/assets/images/research/code-comparison/si/BA-1024_time_series.png)
**Figure 8.** Similar to Figure [2](#higher-particle-resolution:~:text=.-,Figure%202.,-Maximum%20dust%20densities) but with dash–dotted lines showing grid resolutions of 1024².
The top panel uses a similar cadence for each time series with an average of 600 samples per code.

![](/assets/images/research/code-comparison/si/BA-1024_CDF.png)
**Figure 9.** Similar to Figure [3](#higher-particle-resolution:~:text=show%20different%20codes.-,Figure%203.,-Time%2Daveraged%20cumulative) but with dash–dotted lines showing grid resolutions of 1024².
